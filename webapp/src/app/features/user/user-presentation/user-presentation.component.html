<div class="container-fluid" *ngIf="user">
    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-body">
                    <div class="profile-picture-content d-flex align-items-center">
                        <div class="profile-picture">
                          <span *ngIf="profilePicture && profilePicture.data" [innerHTML]="profilePicture | toImage"></span>
                        </div>
                        <div class="content-details">
                          <div class="username">
                            <span class="ml-2"><strong>{{user?.name}} {{user?.surname}}</strong></span>
                          </div>
                          <span class="text-primary mx-2" (click)="toggleUploader()">Ndrysho foton e profilit</span>
                          <span class="text-danger">Hiq</span>

                          <div class="file-upload-container" *ngIf="isUploaderVisible">
                            <div id="fileUploadDiv" class="file-upload-handler">
                              <div ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}" (fileOver)="fileOverBase($event)"
                                [uploader]="uploader" (onFileDrop)="onFileSelected()" class="my-drop-zone" (click)="fileInput.click()">

                                <span *ngIf="hasBaseDropZoneOver && !uploader?.queue?.length">
                                  Ngarko foton ketu
                                </span>

                                <input  type="file" #fileInput ng2FileSelect
                                  (onFileSelected)="onFileSelected()" [uploader]="uploader" style="display: none" />
                              </div>
                              <div>
                                <button type="button" class="lion-button lion-button-text ml-2" (click)="fileInput.click()"
                                  [title]="this.uploader.queue.length ===  0 ? 'No file choosen' : this.uploader.queue[0].file.name"
                                  style="width: 100px;" [ngClass]="{'lion-button-mandatory ': !this.uploader.queue.length }">Browse</button>
                                <button type="button" class="lion-button lion-button-text ml-2"
                                  (click)="uploadProfilePicutre()"
                                  [ngClass]="{'lion-button-mandatory ': this.uploader.queue.length, 'lion-button-inactive':!this.uploader.queue.length}">Ngarko</button>
                              </div>
                            </div>
                          </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col">
            <div class="card">
                <div class="card-header">
                    Detajet
                </div>
                <div class="card-body">
                        <form [formGroup]="userForm">
                          <div class="form-row">
                            <div class="form-group col-md-6">
                              <label>Emer</label>
                              <input type="text" class="form-control" placeholder="Emer" formControlName="name">
                            </div>
                            <div class="form-group col-md-6">
                              <label>Mbiemer</label>
                              <input type="text" class="form-control" placeholder="Mbiemer" formControlName="surname">
                            </div>
                          </div>
                          <div class="form-row">
                            <div class="form-group col-md-6">
                              <label for="inputAddress2">Username</label>
                              <input type="text" class="form-control" placeholder="Username" formControlName="username">
                            </div>
                            <div class="form-group col-md-6">
                              <label>Roli</label>
                              <ng-select
                                  [items]="roles"
                                  [multiple]="true"
                                  [closeOnSelect]="false"
                                  [searchable]="false"
                                  placeholder="Zgjidh rolin"
                                  formControlName="roles"
                                  >
                              </ng-select>
                          </div>
                          </div>

                          <div class="form-group">
                            <label for="inputAddress">Adresa</label>
                            <input type="text" class="form-control" placeholder="Adresa" formControlName="address">
                          </div>
                          <div class="form-group">
                            <label for="inputAddress">Email</label>
                            <input type="email" class="form-control" placeholder="Email" formControlName="email">
                          </div>

                          <button type="button" class="btn btn-primary" (click)="saveChanges()">Ruaj ndryshimet</button>
                          <button type="button" class="btn btn-primary ml-2" [ngClass]="{'btn-danger': user.active}">{{user?.active ? 'Hiq te drejtat' : 'Aktivizo'}}</button>
                        </form>
                </div>
            </div>
        </div>
    </div>
</div>



